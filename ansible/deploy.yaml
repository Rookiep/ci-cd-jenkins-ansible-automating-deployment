---
- name: Deploy application
  hosts: localhost
  vars:
    image_tag: "{{ image_tag | default('latest') }}"
  
  tasks:
    - name: Display deployment info
      debug:
        msg: |
          âœ… SUCCESS! Application deployment ready
          =======================================
          Docker Image: myapp:{{ image_tag }}
          Build Status: COMPLETED âœ“
          Image Built: SUCCESSFUL âœ“
          
          Next steps:
          - Docker image built and tagged âœ“
          - Image ready for deployment âœ“
          - Manual deployment to Minikube required

    - name: Show docker image details
      shell: docker images myapp:{{ image_tag }}
      register: image_info
      ignore_errors: yes

    - name: Display image information
      debug:
        msg: "{{ image_info.stdout }}"

    - name: Create deployment instructions
      debug:
        msg: |
          ðŸ”§ MANUAL DEPLOYMENT INSTRUCTIONS
          ================================
          To deploy to Minikube manually, run:
          
          1. Switch to Minikube Docker: eval $(minikube docker-env)
          2. Build in Minikube: docker build -t myapp:{{ image_tag }} .
          3. Create deployment: kubectl create deployment myapp --image=myapp:{{ image_tag }} --port=5000
          4. Expose service: kubectl expose deployment myapp --type=LoadBalancer --port=80 --target-port=5000
          5. Get URL: minikube service myapp --url
        